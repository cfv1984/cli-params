{"version":3,"file":"index.esm.js","sources":["../src/params/isProcessArgv.js","../src/params/parsers/full_flag.js","../src/params/parsers/short_flag.js","../src/params/parsers/positional.js","../src/params/index.js"],"sourcesContent":["function isProcessArgv(obj) {\r\n  return obj === process.argv;\r\n}\r\n\r\nexport default isProcessArgv;\r\n","const FULL_FLAG = {\r\n  canParse(str) {\r\n    return str.startsWith(\"--\");\r\n  },\r\n  parse(str, _) {\r\n    let [name, value] = str.slice(2).split(\"=\");\r\n    if(!value){\r\n      value === true;\r\n    }\r\n    return { name, value };\r\n  },\r\n};\r\n\r\nexport default FULL_FLAG;","import FULL_FLAG from \"./full_flag\";\r\n\r\nconst SHORT_FLAG = {\r\n  canParse(str) {\r\n    return !FULL_FLAG.canParse(str) && str.startsWith(\"-\");\r\n  },\r\n  parse(str, _) {\r\n    let [name, value] = str.slice(1).split(\"=\");\r\n    if (typeof value === \"undefined\") {\r\n      value = true;\r\n    }\r\n    if ([\"true\", \"false\"].includes(value)) {\r\n      value = value === \"true\";\r\n    }\r\n\r\n    return { name, value };\r\n  },\r\n};\r\n\r\nexport default SHORT_FLAG;\r\n","import FULL_FLAG from \"./full_flag\";\r\nimport SHORT_FLAG from \"./short_flag\";\r\n\r\nconst POSITIONAL = {\r\n  canParse(str) {\r\n    return !SHORT_FLAG.canParse(str) && !FULL_FLAG.canParse(str);\r\n  },\r\n  parse(str, all) {\r\n    const name = all.indexOf(str);\r\n    const value = str;\r\n    return { name, value };\r\n  },\r\n};\r\n\r\nexport default POSITIONAL;;\r\n","import isProcessArgv from \"./isProcessArgv\";\r\nimport { SHORT_FLAG, FULL_FLAG, POSITIONAL } from \"./parsers\";\r\n\r\nfunction params(args = process.argv, aliases = {}) {\r\n  if (!args instanceof Array) {\r\n    throw new Error(\"Bad input, expecting an array of cli parameters\");\r\n  }\r\n  const RAW = Symbol(\"raw\");\r\n  const PARSERS = [SHORT_FLAG, FULL_FLAG, POSITIONAL];\r\n  let params = {\r\n    [RAW]: {\r\n      list: args,\r\n    },\r\n  };\r\n\r\n  if (isProcessArgv(args)) {\r\n    params = {\r\n      [RAW]: {\r\n        file: args[1],\r\n        list: args.slice(2),\r\n      },\r\n    };\r\n  }\r\n\r\n  params.positional = [];\r\n  params.RAW = RAW;\r\n  const { list } = params[RAW];\r\n\r\n  list.forEach((arg) => {\r\n    const parser = PARSERS.filter((p) => p.canParse(arg)).pop();\r\n    if (typeof parser !== \"undefined\") {\r\n      const { name, value } = parser.parse(arg, list);\r\n      if (name === Number(name)) {\r\n        params.positional[name] = value;\r\n      } else {\r\n        params[name] = value;\r\n      }\r\n    }\r\n  });\r\n\r\n  Object.keys(aliases).forEach((newKey) => {\r\n    const oldKey = aliases[newKey];\r\n    const value = params[oldKey];\r\n    if (typeof value === \"undefined\") {\r\n      return;\r\n    }\r\n    delete params[oldKey];\r\n    params = {\r\n      ...params,\r\n      [newKey]: value,\r\n    };\r\n  });\r\n\r\n  return params;\r\n}\r\n\r\nexport default params;\r\n"],"names":["isProcessArgv","obj","process","argv","FULL_FLAG","canParse","str","startsWith","parse","_","slice","split","name","value","SHORT_FLAG","includes","POSITIONAL","all","indexOf","params","args","aliases","Array","Error","RAW","Symbol","PARSERS","list","file","positional","forEach","arg","parser","filter","p","pop","Number","Object","keys","newKey","oldKey"],"mappings":"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"}